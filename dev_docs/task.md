# Task: Plan and Initialize "Keep-style" Markdown App

- [ ] Requirements Analysis & Architecture Design <!-- id: 0 -->
    - [x] Define data model (File = Note, Folder = Label) <!-- id: 1 -->
    - [x] Design "Inbox" routing logic <!-- id: 2 -->
    - [x] Design metadata strategy (Where to store color? Config file? Frontmatter?) <!-- id: 3 -->
- [x] Initialize Android Project <!-- id: 4 -->
    - [x] Setup Kotlin + Jetpack Compose project <!-- id: 5 -->
    - [x] Setup Material 3 dependencies <!-- id: 6 -->
- [x] Implement Core File System Layer <!-- id: 7 -->
    - [x] Implement "Root Folder" selection/permission <!-- id: 8 -->
    - [x] Implement File Observer/Scanner <!-- id: 9 -->
    - [x] Implement Folder -> Label mapping logic <!-- id: 10 -->
- [x] Implement UI (Google Keep Aesthetic) <!-- id: 11 -->
    - [x] Create Staggered Grid Dashboard <!-- id: 12 -->
    - [x] Create "Note Editor" with Label selector <!-- id: 13 -->
    - [x] Apply Dynamic Colors / Pastel Palette <!-- id: 14 -->
- [x] Implement App Logic <!-- id: 15 -->
    - [x] Logic: Move root files to 'Inbox' automatically <!-- id: 16 -->
    - [x] Logic: Import/Export settings <!-- id: 17 -->
- [x] Bug Fixes & Polish <!-- id: 19 -->
    - [x] Fix: Root folder permission persistence (SharedPreferences) <!-- id: 20 -->
    - [x] Fix: Dark Mode colors (Text readability & Card backgrounds) <!-- id: 21 -->
    - [x] Polish: Ensure note colors work in dark mode (opacity/HSL) <!-- id: 22 -->
- [x] Data Layer Improvements <!-- id: 23 -->
    - [x] Fix: Metadata persistence (Colors not saving/loading) <!-- id: 24 -->
    - [x] Fix: Note caching (Avoid "loading from scratch" feel) <!-- id: 25 -->
    - [x] Logic: Implement "Soft Delete" (Move to `Deleted/Label/`) <!-- id: 26 -->
    - [x] Logic: Implement "Archive" (Move to `Archive/Label/`) <!-- id: 27 -->
- [x] UI Expansion <!-- id: 28 -->
    - [x] Feature: Side Navigation Drawer (Inbox, Archive, Trash, Labels) <!-- id: 29 -->
    - [ ] Bug Investigation & Fixes (v2) <!-- id: 31 -->
    - [x] Fix: Startup "Select Folder" screen appearing unnecessarily <!-- id: 32 -->
    - [x] Fix: Labels missing in Side Menu (Folder parsing issue?) <!-- id: 33 -->
    - [x] Feature: Allow creating new Labels/Folders in Editor <!-- id: 34 -->
- [x] Verification <!-- id: 18 -->
- [x] Optimization & Sorting (v3)
    - [x] Feature: Sorting by Date/Title (Asc/Desc)
    - [x] Performance: Optimistic UI Updates (Archive/Trash)
    - [x] Performance: File Content Caching
- [x] Fix: Status Bar Color (Remove Tint)
- [x] Fix: Note Sort Order (Value Manual Sorting) `[Moved to top only on Content Edit]`
- [x] Feature: Multi-Selection Color Change `[Preserves Sort Order]`
- [x] Fix: Color Change in Editor `[Preserves Sort Order]`
- [x] Fix: Color Change in Editor `[Preserves Sort Order]`
- [x] Feature: Markdown Editor & Preview
    - [x] Toolbar: Bold, Italic, List, Checkbox, Code
    - [x] WYSIWYG Mode: Rich Text Editor (hides syntax)
    - [x] Code Mode: Raw Markdown editing (shows syntax)
    - [x] Sync: Seamless switching between modes
    - [x] Fix: Unwanted Saves (Cached Initial Parse State)
    - [x] Feature: Dashboard Rendered Previews (MarkdownText)
    - [x] Fix: Dashboard Note Click (Overlay Click Interceptor)
    - [x] Fix: Editor Covered by Keyboard (IME Padding)
    - [x] UI: Redesigned Editor Bottom Bar (Dynamic States)
    - [x] UI: Moved Label Selector to Top Bar
    - [x] UI: Colors Palette Logic (Sort & Auto-close)
    - [x] UI: Formatting Icon Refinement (Underlined 'A')
    - [x] UI: Bottom Bar Alignment (Left-aligned)
    - [x] UI: Formatting State Highlights (Active Button Color + Circular Shape)
    - [x] UX: Formatting Auto-Open on Keyboard
    - [x] Feature: Indent Button (Simple Unicode NBSP)
    - [x] Fix: Back Button closes app (BackHandler)
    - [x] Fix: Back Button closes app (BackHandler)
    - [x] Fix: Back Button closes app (BackHandler)
    - [x] Performance: Cold Start Latency (Persistent JSON Cache)
    - [x] Fix: AppConfig Persistence (Gson Mutable Types compatibility)
    - [x] Fix: Config File Visibility (Renamed to `keepnotes_config.json`)
    - [x] Fix: Startup Latency (Optimistic Disk Cache Update)
- [x] Feature: Pin Notes (Multi-select)
    - [x] Repo: Implement togglePinStatus
    - [x] ViewModel: togglePin action
    - [x] UI: Pin Icon in Selection Bar
    - [x] UI: Sort Pinned Notes to Top
    - [x] UI: Visual Separation (Pinned vs Others Headers)
- [x] Refinements (v5)
    - [x] Fix: Editor saves even if no changes ("Dirty Check")
    - [x] Performance: Optimistic Save (Instant UI update)
    - [x] Fix: Editor saves even if no changes ("Dirty Check")
    - [x] Performance: Optimistic Save (Instant UI update)
    - [x] UX: Rename "Date Created" to "Date Modified"
- [x] Refinements (v6)
    - [x] UX: Preserve Scroll Position on Back
    - [x] Fix: Duplicate Note on Folder Change (Move)
    - [x] Context-Aware Selection (Archive/Trash)
    - [x] UI Fix: Transparent Status Bar (Default Look)
- [x] Refinements (v7)
    - [x] UX: Long-press anywhere to select
    - [x] UI: Simplified Selection Header (Count only)
    - [x] UX: Delete Confirmation Dialog
- [x] Launch Prep
    - [x] Rebrand: Name change to "MarkIt"
    - [x] Rebrand: New App Icon
    - [x] Git: Initialize Repository
    - [x] Git: Commit Initial Code
    - [x] Git: Push to GitHub
